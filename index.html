<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Villa POS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-192x192.png">
</head>
<body>
    <div class="container">
        <!-- Language Switcher -->
        <div class="language-switcher">
            <button data-lang="cs" class="lang-btn">CS</button>
            <button data-lang="en" class="lang-btn active">EN</button>
        </div>

        <!-- Villa Selection Screen -->
        <div id="villaScreen" class="screen active">
            <div class="header" data-lang-key="selectVilla">Select Villa</div>
            <div class="villa-card" data-villa="little-castle">
                <i class="fas fa-chess-rook"></i>
                <div>The Little Castle</div>
            </div>
            <div class="villa-card" data-villa="amazing-villa">
                <i class="fas fa-home"></i>
                <div>Amazing Villa</div>
            </div>
            <div class="villa-card" data-villa="oh-yeah-villa">
                <i class="fas fa-umbrella-beach"></i>
                <div>Oh Yeah Villa</div>
            </div>
        </div>

        <!-- Order Screen -->
        <div id="orderScreen" class="screen">
            <div class="back-button" id="backToVilla">
                <i class="fas fa-chevron-left"></i>
            </div>
            <div class="header" data-lang-key="newOrder">New Order</div>
            
            <div class="tab-bar">
                <div class="tab active" data-category="drinks" data-lang-key="drinks">Drinks</div>
                <div class="tab" data-category="services" data-lang-key="services">Services</div>
                <div class="tab" data-category="gifts" data-lang-key="gifts">Gifts</div>
                <div class="tab" data-category="custom" data-lang-key="custom">Custom</div>
            </div>
            
            <div class="search-bar">
                <input type="text" id="searchItems" data-lang-placeholder="searchItems" placeholder="Search items...">
                <i class="fas fa-search"></i>
            </div>

            <div id="drinksCategory" class="category-content">
                <div class="item-row" data-item="jagermeister">
                    <div class="item-info">
                        <div class="item-name">Jägermeister shot</div>
                        <div class="item-price">59 CZK / 2.40 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="soda">
                    <div class="item-info">
                        <div class="item-name">Coca-Cola, Sprite, Fanta</div>
                        <div class="item-price">32 CZK / 1.3 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="vitamin-water">
                    <div class="item-info">
                        <div class="item-name">Vitamin Water</div>
                        <div class="item-price">35 CZK / 1.4 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="redbull">
                    <div class="item-info">
                        <div class="item-name">Red Bull</div>
                        <div class="item-price">60 CZK / 2.4 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="jack-cola">
                    <div class="item-info">
                        <div class="item-name">Jack & Cola</div>
                        <div class="item-price">125 CZK / 5 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="gin-tonic">
                    <div class="item-info">
                        <div class="item-name">Gin & Tonic</div>
                        <div class="item-price">75 CZK / 3 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="moscow-mule">
                    <div class="item-info">
                        <div class="item-name">Moscow Mule</div>
                        <div class="item-price">100 CZK / 4 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="mojito">
                    <div class="item-info">
                        <div class="item-name">Mojito</div>
                        <div class="item-price">100 CZK / 4 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="pina-colada">
                    <div class="item-info">
                        <div class="item-name">Piña Colada</div>
                        <div class="item-price">100 CZK / 4 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="beer">
                    <div class="item-info">
                        <div class="item-name">Beer</div>
                        <div class="item-price">60 CZK / 2.4 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="prosecco">
                    <div class="item-info">
                        <div class="item-name">Prosecco</div>
                        <div class="item-price">475 CZK / 19 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>
                
                <!-- New Beer Kegs Items -->
                <div class="item-row" data-item="beer-keg-30">
                    <div class="item-info">
                        <div class="item-name">Beer Keg 30L</div>
                        <div class="item-price">3000 CZK / 120 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>
                
                <div class="item-row" data-item="beer-keg-50">
                    <div class="item-info">
                        <div class="item-name">Beer Keg 50L</div>
                        <div class="item-price">4375 CZK / 175 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>
            </div>

            <div id="servicesCategory" class="category-content" style="display: none;">
                <div class="item-row" data-item="grill-gas">
                    <div class="item-info">
                        <div class="item-name">Gas for grill</div>
                        <div class="item-price">20 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="fire-table-gas">
                    <div class="item-info">
                        <div class="item-name">Gas for fire table</div>
                        <div class="item-price">12 EUR</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="city-tax">
                    <div class="item-info">
                        <div class="item-name">City Tax</div>
                        <div class="item-price">2 EUR / person / day</div>
                        <div class="custom-input">
                            <input type="number" id="cityTaxPeople" min="1" value="1"> people for 
                            <input type="number" id="cityTaxDays" min="1" value="1"> days
                        </div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>

                <div class="item-row" data-item="wellness-fee">
                    <div class="item-info">
                        <div class="item-name">Wellness fee</div>
                        <div class="item-price">Custom amount</div>
                        <div class="custom-input">
                            <input type="number" id="wellnessFeeAmount" min="0" placeholder="Enter amount in EUR">
                        </div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>
            </div>
            
            <!-- New Gift Category -->
            <div id="giftsCategory" class="category-content" style="display: none;">
                <div class="section-heading" data-lang-key="giftItems">Gift Items</div>
                <p class="gift-info" data-lang-key="giftInfo">Items added here will be marked as gifts and won't be charged</p>
                
                <div class="item-row gift-item" data-item="gift-beer">
                    <div class="item-info">
                        <div class="item-name">Beer (Gift)</div>
                        <div class="item-price">0 EUR (Free)</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>
                
                <div class="item-row gift-item" data-item="gift-prosecco">
                    <div class="item-info">
                        <div class="item-name">Prosecco (Gift)</div>
                        <div class="item-price">0 EUR (Free)</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>
                
                <div class="item-row gift-item" data-item="gift-cocktail">
                    <div class="item-info">
                        <div class="item-name">Cocktail (Gift)</div>
                        <div class="item-price">0 EUR (Free)</div>
                    </div>
                    <div class="item-quantity">
                        <button class="decrease-qty">-</button>
                        <input type="number" class="qty-input" value="0" min="0">
                        <button class="increase-qty">+</button>
                    </div>
                </div>
            </div>
            
            <!-- New Custom Items Category -->
            <div id="customCategory" class="category-content" style="display: none;">
                <div class="section-heading" data-lang-key="customItems">Custom Items</div>
                
                <div class="custom-item-form">
                    <input type="text" id="customItemName" data-lang-placeholder="itemName" placeholder="Item name">
                    <input type="number" id="customItemPrice" min="0" step="0.01" data-lang-placeholder="itemPrice" placeholder="Price in EUR">
                    <div class="custom-item-options">
                        <label>
                            <input type="checkbox" id="customItemGift">
                            <span data-lang-key="markAsGift">Mark as gift</span>
                        </label>
                    </div>
                    <button id="addCustomItem" class="btn" data-lang-key="addItem">Add Item</button>
                </div>
                
                <div id="customItemsList">
                    <!-- Custom items will be added here dynamically -->
                </div>
            </div>
            
            <!-- Discount Section -->
            <div class="discount-section">
                <div class="section-heading" data-lang-key="discounts">Discounts</div>
                <div class="discount-options">
                    <div class="discount-option">
                        <input type="number" id="discountPercent" min="0" max="100" placeholder="%" data-lang-placeholder="discountPercent">
                        <button id="applyPercentDiscount" class="btn secondary" data-lang-key="applyPercentDiscount">Apply %</button>
                    </div>
                    <div class="discount-option">
                        <input type="number" id="discountAmount" min="0" step="0.01" placeholder="EUR" data-lang-placeholder="discountAmount">
                        <button id="applyAmountDiscount" class="btn secondary" data-lang-key="applyAmountDiscount">Apply €</button>
                    </div>
                    <button id="removeDiscount" class="btn danger" data-lang-key="removeDiscount">Remove Discount</button>
                </div>
            </div>

            <div class="order-summary-container">
                <div class="order-summary">
                    <div class="order-summary-left">
                        <div class="order-summary-label" data-lang-key="totalItems">Total Items</div>
                        <div id="totalItems">0</div>
                    </div>
                    <div class="order-summary-right">
                        <div class="order-summary-label" data-lang-key="totalAmount">Total Amount</div>
                        <div id="totalAmount">0.00 EUR</div>
                    </div>
                </div>
                
                <!-- Gift Summary -->
                <div class="order-summary gift-summary">
                    <div class="order-summary-left">
                        <div class="order-summary-label" data-lang-key="giftItems">Gift Items</div>
                        <div id="totalGiftItems">0</div>
                    </div>
                    <div class="order-summary-right">
                        <div class="order-summary-label" data-lang-key="giftValue">Gift Value</div>
                        <div id="totalGiftAmount">0.00 EUR</div>
                    </div>
                </div>
                
                <!-- Discount Summary (visible only when discount applied) -->
                <div class="order-summary discount-summary" style="display: none;">
                    <div class="order-summary-left">
                        <div class="order-summary-label" data-lang-key="discount">Discount</div>
                        <div id="discountType">0%</div>
                    </div>
                    <div class="order-summary-right">
                        <div class="order-summary-label" data-lang-key="discountValue">Discount Value</div>
                        <div id="discountValue">0.00 EUR</div>
                    </div>
                </div>
                
                <!-- Final Total After Discount -->
                <div class="order-summary final-total" style="display: none;">
                    <div class="order-summary-left">
                        <div class="order-summary-label" data-lang-key="finalTotal">Final Total</div>
                    </div>
                    <div class="order-summary-right">
                        <div id="finalTotalAmount">0.00 EUR</div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button id="proceedToPayment" class="btn" data-lang-key="proceedToPayment">Proceed to Payment</button>
                <button id="clearOrder" class="btn secondary" data-lang-key="clearOrder">Clear Order</button>
            </div>
        </div>

        <!-- Payment Screen -->
        <div id="paymentScreen" class="screen">
            <div class="back-button" id="backToOrder">
                <i class="fas fa-chevron-left"></i>
            </div>
            <div class="header" data-lang-key="paymentMethod">Payment Method</div>
            
            <div class="order-summary">
                <div class="order-summary-left">
                    <div class="order-summary-label" data-lang-key="totalItems">Total Items</div>
                    <div id="paymentTotalItems">0</div>
                </div>
                <div class="order-summary-right">
                    <div class="order-summary-label" data-lang-key="totalAmount">Total Amount</div>
                    <div id="paymentTotalAmount">0.00 EUR</div>
                </div>
            </div>
            
            <!-- Gift Summary in Payment -->
            <div class="order-summary gift-summary">
                <div class="order-summary-left">
                    <div class="order-summary-label" data-lang-key="giftItems">Gift Items</div>
                    <div id="paymentTotalGiftItems">0</div>
                </div>
                <div class="order-summary-right">
                    <div class="order-summary-label" data-lang-key="giftValue">Gift Value</div>
                    <div id="paymentTotalGiftAmount">0.00 EUR</div>
                </div>
            </div>
            
            <!-- Discount Summary in Payment -->
            <div class="order-summary discount-summary" style="display: none;">
                <div class="order-summary-left">
                    <div class="order-summary-label" data-lang-key="discount">Discount</div>
                    <div id="paymentDiscountType">0%</div>
                </div>
                <div class="order-summary-right">
                    <div class="order-summary-label" data-lang-key="discountValue">Discount Value</div>
                    <div id="paymentDiscountValue">0.00 EUR</div>
                </div>
            </div>
            
            <!-- Final Total After Discount in Payment -->
            <div class="order-summary final-total" style="display: none;">
                <div class="order-summary-left">
                    <div class="order-summary-label" data-lang-key="finalTotal">Final Total</div>
                </div>
                <div class="order-summary-right">
                    <div id="paymentFinalTotalAmount">0.00 EUR</div>
                </div>
            </div>
            
            <div class="payment-option" data-payment="cash">
                <i class="fas fa-money-bill-wave"></i>
                <div class="payment-option-info">
                    <div data-lang-key="cash">Cash</div>
                    <div class="item-price" data-lang-key="cashDescription">Pay with cash</div>
                </div>
            </div>
            
            <div class="payment-option" data-payment="card">
                <i class="fas fa-credit-card"></i>
                <div class="payment-option-info">
                    <div data-lang-key="card">Card</div>
                    <div class="item-price" data-lang-key="cardDescription">Pay with credit/debit card</div>
                </div>
            </div>
            
            <div class="payment-option" data-payment="unpaid">
                <i class="fas fa-clock"></i>
                <div class="payment-option-info">
                    <div data-lang-key="unpaid">Unpaid</div>
                    <div class="item-price" data-lang-key="unpaidDescription">Mark as unpaid (pay later)</div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button id="completeOrder" class="btn success" data-lang-key="completeOrder">Complete Order</button>
                <button id="cancelPayment" class="btn secondary" data-lang-key="cancel">Cancel</button>
            </div>
        </div>

        <!-- Receipt Screen -->
        <div id="receiptScreen" class="screen">
            <div class="header" data-lang-key="orderCompleted">Order Completed</div>
            
            <div class="receipt" id="receiptContent">
                <div class="receipt-header">
                    <div class="receipt-title" data-lang-key="receipt">RECEIPT</div>
                    <div class="receipt-villa" id="receiptVilla">Villa Name</div>
                    <div class="receipt-date" id="receiptDate">Date and Time</div>
                </div>
                
                <!-- Paid Items -->
                <div class="receipt-section">
                    <div class="receipt-section-title" data-lang-key="paidItems">Paid Items</div>
                    <div class="receipt-items" id="receiptPaidItems">
                        <!-- Paid items will be inserted here dynamically -->
                    </div>
                    
                    <!-- Discount in Receipt if applied -->
                    <div class="receipt-discount" id="receiptDiscount" style="display: none;">
                        <div class="receipt-item">
                            <div class="receipt-item-left">
                                <div class="receipt-item-name" data-lang-key="discount">Discount</div>
                                <div class="receipt-item-qty" id="receiptDiscountType">10%</div>
                            </div>
                            <div class="receipt-item-price" id="receiptDiscountValue">-10.00 EUR</div>
                        </div>
                    </div>
                    
                    <div class="receipt-total">
                        <div data-lang-key="total">Total</div>
                        <div id="receiptPaidTotal">0.00 EUR</div>
                    </div>
                </div>
                
                <!-- Gift Items -->
                <div class="receipt-section gift-section" id="receiptGiftSection" style="display: none;">
                    <div class="receipt-section-title" data-lang-key="giftItems">Gift Items</div>
                    <div class="receipt-items" id="receiptGiftItems">
                        <!-- Gift items will be inserted here dynamically -->
                    </div>
                    <div class="receipt-total gift-total">
                        <div data-lang-key="giftValue">Gift Value</div>
                        <div id="receiptGiftTotal">0.00 EUR</div>
                    </div>
                </div>
                
                <div class="receipt-payment" id="receiptPayment">
                    Paid with Cash
                </div>
            </div>
            
            <div class="action-buttons">
                <button id="shareReceipt" class="btn">
                    <i class="fas fa-share-alt"></i> <span data-lang-key="shareReceipt">Share Receipt</span>
                </button>
                <button id="saveReceipt" class="btn secondary">
                    <i class="fas fa-download"></i> <span data-lang-key="saveAsPDF">Save as PDF</span>
                </button>
                <button id="newOrder" class="btn success">
                    <i class="fas fa-plus"></i> <span data-lang-key="newOrder">New Order</span>
                </button>
            </div>
        </div>

        <!-- History Screen -->
        <div id="historyScreen" class="screen">
            <div class="header" data-lang-key="orderHistory">Order History</div>
            
            <div id="orderHistory">
                <!-- Order history will be populated dynamically -->
                <div class="empty-state">
                    <i class="fas fa-history"></i>
                    <div data-lang-key="noOrders">No orders yet</div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button id="clearHistory" class="btn danger" data-lang-key="clearHistory">Clear History</button>
                <button id="backToMain" class="btn secondary" data-lang-key="backToMain">Back to Main</button>
            </div>
        </div>
    </div>

    <!-- Loading indicator -->
    <div class="loading" style="display: none;">
        <div class="loading-spinner"></div>
        <div data-lang-key="processing">Processing...</div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="app.js"></script>
</body>
</html>